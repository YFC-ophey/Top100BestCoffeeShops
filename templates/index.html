<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Top100BestCoffeeShops Preview</title>
    <style>
      :root {
        --bg: #0e1117;
        --surface-1: #141a24;
        --surface-2: #1a2230;
        --surface-3: #212b3c;
        --line: #2f3b50;
        --text-1: #eef3ff;
        --text-2: #aebad2;
        --accent: #0f83fd;
        --accent-soft: rgba(15, 131, 253, 0.18);
      }
      * { box-sizing: border-box; }
      html, body { height: 100%; }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        background:
          radial-gradient(1200px 500px at 20% -10%, #1d2940 0%, transparent 60%),
          radial-gradient(900px 450px at 95% 5%, #19243a 0%, transparent 60%),
          var(--bg);
        color: var(--text-1);
      }
      .app-shell {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        padding: 12px;
        gap: 10px;
      }
      .shell-topbar {
        height: 52px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        border: 1px solid var(--line);
        background: rgba(20, 26, 36, 0.88);
        backdrop-filter: blur(8px);
        border-radius: 12px;
        padding: 0 12px;
      }
      .brand-wrap {
        display: flex;
        align-items: center;
        gap: 10px;
        min-width: 0;
      }
      .brand-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: var(--accent);
        box-shadow: 0 0 0 6px rgba(15, 131, 253, 0.12);
      }
      .brand-title {
        font-size: 0.92rem;
        font-weight: 700;
        white-space: nowrap;
      }
      .brand-sub {
        font-size: 0.78rem;
        color: var(--text-2);
      }
      .topbar-actions {
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .status-pill {
        border: 1px solid #33557a;
        background: #132033;
        color: #9bc7ff;
        padding: 5px 10px;
        border-radius: 999px;
        font-size: 0.74rem;
        font-weight: 600;
      }
      .topbar-actions a {
        color: var(--text-2);
        text-decoration: none;
        border: 1px solid var(--line);
        background: var(--surface-2);
        border-radius: 8px;
        padding: 6px 9px;
        font-size: 0.76rem;
        transition: 150ms ease;
      }
      .topbar-actions a:hover,
      .topbar-actions a:focus-visible {
        border-color: #3f5f86;
        color: var(--text-1);
        outline: none;
      }
      .shell-body {
        flex: 1;
        min-height: 0;
        display: grid;
        grid-template-columns: minmax(0, 1fr) 360px;
        gap: 10px;
      }
      .workspace-main {
        border: 1px solid var(--line);
        border-radius: 12px;
        background: linear-gradient(180deg, rgba(26, 34, 48, 0.94), rgba(20, 26, 36, 0.94));
        min-height: 0;
        padding: 12px;
        display: flex;
        flex-direction: column;
      }
      .workspace-head {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 12px;
        flex-wrap: wrap;
        margin-bottom: 10px;
      }
      .workspace-head h1 {
        margin: 0;
        font-size: clamp(1.1rem, 2vw, 1.45rem);
        letter-spacing: -0.01em;
      }
      .workspace-head p {
        margin: 3px 0 0;
        color: var(--text-2);
        font-size: 0.86rem;
      }
      .meta-chips {
        display: flex;
        align-items: center;
        gap: 7px;
        flex-wrap: wrap;
      }
      .chip {
        border: 1px solid var(--line);
        background: var(--surface-3);
        border-radius: 999px;
        padding: 5px 10px;
        color: #dbe6fb;
        font-size: 0.77rem;
      }
      .tabs {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        margin: 0 0 10px;
      }
      .tab-btn {
        border: 1px solid var(--line);
        background: var(--surface-2);
        color: var(--text-2);
        border-radius: 9px;
        padding: 7px 11px;
        font-size: 0.8rem;
        cursor: pointer;
        transition: 140ms ease;
      }
      .tab-btn:hover,
      .tab-btn:focus-visible {
        border-color: #3f5f86;
        color: var(--text-1);
        outline: none;
      }
      .tab-btn.active {
        border-color: #3f5f86;
        background: var(--accent-soft);
        color: var(--text-1);
      }
      .tab-panel {
        display: none;
        animation: panelIn 150ms ease;
      }
      .tab-panel.active { display: block; }
      @keyframes panelIn {
        from { opacity: 0; transform: translateY(4px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .panel {
        border: 1px solid var(--line);
        border-radius: 10px;
        background: rgba(20, 26, 36, 0.82);
        padding: 10px;
      }
      .layout-3 {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 8px;
        margin-bottom: 10px;
      }
      .tile {
        border: 1px solid var(--line);
        border-radius: 10px;
        background: var(--surface-2);
        padding: 10px;
      }
      .tile h3 {
        margin: 0 0 5px;
        font-size: 0.83rem;
      }
      .tile p {
        margin: 0;
        color: var(--text-2);
        font-size: 0.76rem;
        line-height: 1.45;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        border: 1px solid var(--line);
        border-radius: 10px;
        overflow: hidden;
        background: #111723;
      }
      th,
      td {
        padding: 8px 7px;
        text-align: left;
        border-bottom: 1px solid #263349;
        font-size: 0.78rem;
      }
      th {
        color: #a5b6d6;
        background: #182131;
        letter-spacing: 0.04em;
        text-transform: uppercase;
        font-size: 0.7rem;
      }
      td { color: #e6efff; }
      ol.link-list {
        margin: 0;
        padding: 10px 22px;
        border: 1px solid var(--line);
        border-radius: 10px;
        background: #111723;
      }
      ol.link-list li { margin: 5px 0; }
      ol.link-list a {
        color: #8cc1ff;
        text-decoration: none;
        font-size: 0.83rem;
      }
      ol.link-list a:hover,
      ol.link-list a:focus-visible {
        color: #c2ddff;
        outline: none;
      }
      .utility-panel {
        border: 1px solid var(--line);
        border-radius: 12px;
        background: rgba(20, 26, 36, 0.92);
        display: flex;
        flex-direction: column;
        min-height: 0;
      }
      .utility-head {
        padding: 10px 12px;
        border-bottom: 1px solid var(--line);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .utility-head h2 {
        margin: 0;
        font-size: 0.82rem;
      }
      .utility-head span {
        color: var(--text-2);
        font-size: 0.74rem;
      }
      .utility-scroll {
        min-height: 0;
        overflow: auto;
        padding: 10px;
        display: grid;
        gap: 9px;
      }
      .util-card {
        border: 1px solid var(--line);
        border-radius: 10px;
        background: var(--surface-2);
        padding: 10px;
      }
      .util-card h3 {
        margin: 0 0 5px;
        font-size: 0.8rem;
      }
      .util-card p,
      .util-card li {
        margin: 0;
        color: var(--text-2);
        font-size: 0.76rem;
        line-height: 1.5;
      }
      .util-list {
        margin: 6px 0 0;
        padding-left: 18px;
      }
      .artifact-links {
        margin-top: 8px;
        display: grid;
        gap: 6px;
      }
      .artifact-links a {
        display: inline-block;
        color: #9dcbff;
        text-decoration: none;
        border: 1px solid var(--line);
        border-radius: 8px;
        padding: 6px 8px;
        background: #162133;
        width: fit-content;
        font-size: 0.76rem;
      }
      .artifact-links a:hover,
      .artifact-links a:focus-visible {
        border-color: #3f5f86;
        color: #d1e6ff;
        outline: none;
      }
      .chat-row {
        display: flex;
        gap: 8px;
        margin-top: 8px;
      }
      .chat-badge {
        width: 20px;
        height: 20px;
        border-radius: 6px;
        display: grid;
        place-items: center;
        font-size: 0.64rem;
        font-weight: 700;
      }
      .chat-badge.you { background: #294870; color: #cbe4ff; }
      .chat-badge.ai { background: #28354c; color: #d6e4ff; }
      .footer-note {
        padding: 8px 12px 10px;
        border-top: 1px solid var(--line);
        color: #93a4c3;
        font-size: 0.7rem;
      }
      @media (max-width: 1060px) {
        .shell-body { grid-template-columns: 1fr; }
        .utility-panel { min-height: 300px; }
      }
      @media (max-width: 760px) {
        .layout-3 { grid-template-columns: 1fr; }
        th,
        td { font-size: 0.72rem; }
        .topbar-actions { display: none; }
      }
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation: none !important;
          transition: none !important;
          scroll-behavior: auto !important;
        }
      }
    </style>
  </head>
  <body>
    <div class="app-shell">
      <header class="shell-topbar">
        <div class="brand-wrap">
          <span class="brand-dot" aria-hidden="true"></span>
          <div>
            <div class="brand-title">ROAST. | Global Coffee Explorer</div>
            <div class="brand-sub">Top100BestCoffeeShops Preview</div>
          </div>
        </div>
        <div class="topbar-actions">
          <span class="status-pill">Live Workspace</span>
          {% if csv_available %}<a href="/artifacts/csv">CSV</a>{% endif %}
          {% if kml_available %}<a href="/artifacts/kml">KML</a>{% endif %}
        </div>
      </header>

      <main class="shell-body">
        <section class="workspace-main">
          <div class="workspace-head">
            <div>
              <h1>Top 100 Best Coffee Shops 2026</h1>
              <p>Data-driven map workspace with ranked shops and shareable Google Maps links.</p>
            </div>
            <div class="meta-chips">
              <span class="chip">Total shops: {{ total_shops }}</span>
              {% for category, count in category_counts.items() %}
              <span class="chip">{{ category }}: {{ count }}</span>
              {% endfor %}
            </div>
          </div>

          <div class="tabs" role="tablist" aria-label="Coffee shop views">
            <button class="tab-btn active" data-tab="overview" role="tab" aria-selected="true">Overview</button>
            <button class="tab-btn" data-tab="top100-links" role="tab" aria-selected="false">Top 100 Links</button>
            <button class="tab-btn" data-tab="south-links" role="tab" aria-selected="false">South Links</button>
          </div>

          <section id="overview" class="tab-panel active panel" role="tabpanel">
            <div class="layout-3">
              <article class="tile">
                <h3>Chat conversation history</h3>
                <p>Track the latest ranking sync decisions and source refresh notes.</p>
              </article>
              <article class="tile">
                <h3>Project canvas and components</h3>
                <p>Map list views, ordered links, and downloadable artifact controls.</p>
              </article>
              <article class="tile">
                <h3>Live preview</h3>
                <p>A production-ready shell for GitHub-hosted public viewing.</p>
              </article>
            </div>

            <table>
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Name</th>
                  <th>City</th>
                  <th>Country</th>
                  <th>Category</th>
                </tr>
              </thead>
              <tbody>
                {% for shop in shops %}
                <tr>
                  <td>{{ shop.rank }}</td>
                  <td>{{ shop.name }}</td>
                  <td>{{ shop.city }}</td>
                  <td>{{ shop.country }}</td>
                  <td>{{ shop.category }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </section>

          <section id="top100-links" class="tab-panel panel" role="tabpanel">
            <h2>Top 100 Map Links</h2>
            <ol class="link-list">
              {% for item in top_100_links %}
              <li><a href="{{ item.url }}" target="_blank" rel="noopener">{{ item.label }}</a></li>
              {% endfor %}
            </ol>
          </section>

          <section id="south-links" class="tab-panel panel" role="tabpanel">
            <h2>South Map Links</h2>
            <ol class="link-list">
              {% for item in south_links %}
              <li><a href="{{ item.url }}" target="_blank" rel="noopener">{{ item.label }}</a></li>
              {% endfor %}
            </ol>
          </section>
        </section>

        <aside class="utility-panel" aria-label="Session and map helper panel">
          <div class="utility-head">
            <h2>Initial Session</h2>
            <span>History</span>
          </div>
          <div class="utility-scroll">
            <article class="util-card">
              <h3>Session / History</h3>
              <p>Workspace shell inspired by Superdesign. Current thread tracks refresh and publish actions.</p>
              <div class="chat-row">
                <span class="chat-badge you">You</span>
                <p>Need a clean map-first landing for public use.</p>
              </div>
              <div class="chat-row">
                <span class="chat-badge ai">AI</span>
                <p>Delivered dark workspace shell with tabs and utility panel.</p>
              </div>
            </article>

            <article class="util-card">
              <h3>Artifacts</h3>
              <p>Share and import ranking data into external map tools.</p>
              <div class="artifact-links">
                {% if csv_available %}<a href="/artifacts/csv">Download CSV Artifact</a>{% endif %}
                {% if kml_available %}<a href="/artifacts/kml">Download KML Artifact</a>{% endif %}
              </div>
            </article>

            <article class="util-card">
              <h3>Map Usage Notes</h3>
              <ul class="util-list">
                <li>Open each ranked link to save the place in your Google Maps.</li>
                <li>Use Top 100 and South tabs to keep list order by rank.</li>
                <li>Place IDs are preserved in map URLs when available.</li>
              </ul>
            </article>
          </div>
          <div class="footer-note">Data source: theworlds100bestcoffeeshops.com</div>
        </aside>
      </main>
    </div>

    <script>
      const tabButtons = document.querySelectorAll(".tab-btn");
      const panels = document.querySelectorAll(".tab-panel");
      tabButtons.forEach((button) => {
        button.addEventListener("click", () => {
          const target = button.dataset.tab;
          tabButtons.forEach((item) => {
            const active = item === button;
            item.classList.toggle("active", active);
            item.setAttribute("aria-selected", String(active));
          });
          panels.forEach((panel) => panel.classList.toggle("active", panel.id === target));
        });
      });
    </script>
  </body>
</html>
